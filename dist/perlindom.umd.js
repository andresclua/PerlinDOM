(function(s,e){typeof exports=="object"&&typeof module<"u"?module.exports=e():typeof define=="function"&&define.amd?define(e):(s=typeof globalThis<"u"?globalThis:s||self,s.PerlinDOM=e())})(this,function(){"use strict";var R=Object.defineProperty;var m=s=>{throw TypeError(s)};var X=(s,e,o)=>e in s?R(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o;var F=(s,e,o)=>X(s,typeof e!="symbol"?e+"":e,o),M=(s,e,o)=>e.has(s)||m("Cannot "+o);var u=(s,e,o)=>e.has(s)?m("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,o);var c=(s,e,o)=>(M(s,e,"access private method"),o);var e,d,y,l,L,P,g;const p=class p{constructor({element:r,x:t=null,y:h=null,speed:n=.01,seed:i=0,lerpSpeed:a=.1}){u(this,l);F(this,"animate",()=>{if(this.lerpFactor!==this.targetLerpFactor&&(this.lerpFactor=c(this,l,P).call(this,this.lerpFactor,this.targetLerpFactor,this.lerpSpeed),Math.abs(this.lerpFactor-this.targetLerpFactor)<.001&&(this.lerpFactor=this.targetLerpFactor)),this.lerpFactor>0){this.time+=this.speed*this.lerpFactor;const r=this.noise.perlin1(this.time),t=this.noise.perlin1(this.time+999),h=this.xRange?c(this,l,g).call(this,r,-1,1,this.xRange.min,this.xRange.max):0,n=this.yRange?c(this,l,g).call(this,t,-1,1,this.yRange.min,this.yRange.max):0;this.lastX=h,this.lastY=n,this.el.style.left=`${this.initialX+h}px`,this.el.style.top=`${this.initialY+n}px`}(this.lerpFactor>0||this.targetLerpFactor>0)&&(this.raf=requestAnimationFrame(this.animate))});this.el=r,this.xRange=t,this.yRange=h,this.speed=n,this.time=i,this.isPlaying=!0,this.lerpFactor=1,this.lerpSpeed=a,this.targetLerpFactor=1,this.lastX=0,this.lastY=0,this.initialX=r.offsetLeft,this.initialY=r.offsetTop,this.animate=this.animate.bind(this),this.init(i)}init(r){var t;this.noise=c(this,l,L).call(this,c(t=p,e,y).call(t,r)),this.isPlaying=!0,this.lerpFactor=1,this.targetLerpFactor=1,this.raf=requestAnimationFrame(this.animate),console.log("PerlinDOM initialized")}pause(){this.isPlaying&&(this.targetLerpFactor=0,this.isPlaying=!1,console.log("PerlinDOM pausing..."))}play(){this.isPlaying||(this.targetLerpFactor=1,this.isPlaying=!0,this.lerpFactor===0&&(this.raf=requestAnimationFrame(this.animate)),console.log("PerlinDOM playing..."))}destroy(){cancelAnimationFrame(this.raf)}};e=new WeakSet,d=function(r){return function(){let t=r+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}},y=function(r=0){var n;const t=Array.from({length:256},(i,a)=>a),h=c(n=p,e,d).call(n,r);for(let i=255;i>0;i--){const a=Math.floor(h()*(i+1));[t[i],t[a]]=[t[a],t[i]]}return t.concat(t)},l=new WeakSet,L=function(r){const t=i=>i*i*i*(i*(i*6-15)+10),h=(i,a,f)=>a+i*(f-a),n=(i,a)=>i&1?-a:a;return{perlin1(i){const a=Math.floor(i)&255;i-=Math.floor(i);const f=t(i);return h(f,n(r[a],i),n(r[a+1],i-1))}}},P=function(r,t,h){return r+h*(t-r)},g=function(r,t,h,n,i){return(r-t)*(i-n)/(h-t)+n},u(p,e);let s=p;return s});
