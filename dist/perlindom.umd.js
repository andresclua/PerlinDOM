(function(a,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof define=="function"&&define.amd?define(t):(a=typeof globalThis<"u"?globalThis:a||self,a.PerlinDOM=t())})(this,function(){"use strict";var $=Object.defineProperty;var T=a=>{throw TypeError(a)};var C=(a,t,p)=>t in a?$(a,t,{enumerable:!0,configurable:!0,writable:!0,value:p}):a[t]=p;var q=(a,t,p)=>C(a,typeof t!="symbol"?t+"":t,p),D=(a,t,p)=>t.has(a)||T("Cannot "+p);var b=(a,t,p)=>t.has(a)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,p);var r=(a,t,p)=>(D(a,t,"access private method"),p);var t,E,W,R,L,f,j,H,A;const o=class o{constructor({element:e,x:i=null,y:h=null,speed:l=.01,seed:c=0,lerpSpeed:s=.1}){b(this,f);q(this,"animate",()=>{var e,i,h,l,c,s,n,m,g,u,d,F;if(this.lerpFactor!==this.targetLerpFactor&&(this.lerpFactor=r(this,f,H).call(this,this.lerpFactor,this.targetLerpFactor,this.lerpSpeed),Math.abs(this.lerpFactor-this.targetLerpFactor)<.001&&(this.lerpFactor=this.targetLerpFactor)),this.lerpFactor>0){this.time+=this.speed*this.lerpFactor;const P=this.noise.perlin2(this.time,0),X=this.noise.perlin2(this.time,100);if(this.el){let y,x,v,Y;if(this.hasPercentages){const w=this.el.parentElement||document.body,B=w.clientWidth,S=w.clientHeight;this.xRange&&(y=r(e=o,t,R).call(e,this.xRange.min)?r(i=o,t,L).call(i,this.xRange.min,B):this.xRange.min,x=r(h=o,t,R).call(h,this.xRange.max)?r(l=o,t,L).call(l,this.xRange.max,B):this.xRange.max),this.yRange&&(v=r(c=o,t,R).call(c,this.yRange.min)?r(s=o,t,L).call(s,this.yRange.min,S):this.yRange.min,Y=r(n=o,t,R).call(n,this.yRange.max)?r(m=o,t,L).call(m,this.yRange.max,S):this.yRange.max)}else y=(g=this.xRange)==null?void 0:g.min,x=(u=this.xRange)==null?void 0:u.max,v=(d=this.yRange)==null?void 0:d.min,Y=(F=this.yRange)==null?void 0:F.max;const z=this.xRange?r(this,f,A).call(this,P,-1,1,y,x):0,M=this.yRange?r(this,f,A).call(this,X,-1,1,v,Y):0;this.lastX=z,this.lastY=M,this.el.style.transform=`translate3d(${z}px, ${M}px, 0)`}else{const y=this.xRange?r(this,f,A).call(this,P,-1,1,this.xRange.min,this.xRange.max):0,x=this.yRange?r(this,f,A).call(this,X,-1,1,this.yRange.min,this.yRange.max):0;this.lastX=y,this.lastY=x}}(this.lerpFactor>0||this.targetLerpFactor>0)&&(this.raf=requestAnimationFrame(this.animate))});var n,m,g,u;if(this.el=e,this.xRange=i,this.yRange=h,this.speed=l,this.time=c,this.isPlaying=!0,this.lerpFactor=1,this.lerpSpeed=s,this.targetLerpFactor=1,this.lastX=0,this.lastY=0,this.hasPercentages=!1,(i&&(r(n=o,t,R).call(n,i.min)||r(m=o,t,R).call(m,i.max))||h&&(r(g=o,t,R).call(g,h.min)||r(u=o,t,R).call(u,h.max)))&&(this.hasPercentages=!0),e){const d=window.getComputedStyle(e);d.position==="static"&&(e.style.position="relative");const F=d.transform;(!F||F==="none")&&(e.style.transform="translate3d(0px, 0px, 0px)"),this.hasPercentages&&(this.handleResize=this.handleResize.bind(this),window.addEventListener("resize",this.handleResize))}this.animate=this.animate.bind(this),this.init(c)}init(e){var i;this.noise=r(this,f,j).call(this,r(i=o,t,W).call(i,e)),this.isPlaying=!0,this.lerpFactor=1,this.targetLerpFactor=1,this.raf=requestAnimationFrame(this.animate)}handleResize(){this.hasPercentages&&this.el&&(this.needsRecalculation=!0)}pause(){this.isPlaying&&(this.targetLerpFactor=0,this.isPlaying=!1)}play(){this.isPlaying||(this.targetLerpFactor=1,this.isPlaying=!0,this.lerpFactor===0&&(this.raf=requestAnimationFrame(this.animate)))}destroy(){cancelAnimationFrame(this.raf),this.hasPercentages&&window.removeEventListener("resize",this.handleResize)}};t=new WeakSet,E=function(e){return function(){let i=e+=1831565813;return i=Math.imul(i^i>>>15,i|1),i^=i+Math.imul(i^i>>>7,i|61),((i^i>>>14)>>>0)/4294967296}},W=function(e=0){var l;const i=Array.from({length:256},(c,s)=>s),h=r(l=o,t,E).call(l,e);for(let c=255;c>0;c--){const s=Math.floor(h()*(c+1));[i[c],i[s]]=[i[s],i[c]]}return i.concat(i)},R=function(e){return typeof e=="string"&&e.endsWith("%")},L=function(e,i){var l;return r(l=o,t,R).call(l,e)?parseFloat(e)/100*i:e},f=new WeakSet,j=function(e){const i=s=>s*s*s*(s*(s*6-15)+10),h=(s,n,m)=>n+s*(m-n),l=(s,n,m)=>{const g=s&15,u=g<8?n:m,d=g<4?m:g===12||g===14?n:0;return(g&1?-u:u)+(g&2?-d:d)},c=(s,n)=>s&1?-n:n;return{perlin1(s){const n=Math.floor(s)&255;s-=Math.floor(s);const m=i(s);return h(m,c(e[n],s),c(e[n+1],s-1))},perlin2(s,n){const m=Math.floor(s)&255,g=Math.floor(n)&255;s-=Math.floor(s),n-=Math.floor(n);const u=i(s),d=i(n),F=e[m]+g,P=e[m+1]+g,X=e[F],y=e[F+1],x=e[P],v=e[P+1];return h(d,h(u,l(e[X],s,n),l(e[x],s-1,n)),h(u,l(e[y],s,n-1),l(e[v],s-1,n-1)))}}},H=function(e,i,h){return e+h*(i-e)},A=function(e,i,h,l,c){return(e-i)*(c-l)/(h-i)+l},b(o,t);let a=o;return a});
